import{b as P,c as j}from"./chunk-UE2SYMQH.js";import{A as b,B as _,C as v,D as y,E as x,F as c,G as C,I as a,J as h,K as s,L as w,M as O,O as E,P as U,T as k,U as z,W as D,_ as M,j as m,k as g,l as u,p as I,q as r,r as S,u as f,x as d,y as i,z as n}from"./chunk-3FBWLJSC.js";function R(o,t){if(o&1&&(_(0),i(1,"span",15)(2,"span",16),a(3,"Size reduced:"),n(),a(4),i(5,"span",17),a(6),n()(),v()),o&2){let e=c(2);r(4),w(" ",e.formatSize(e.image.originalSize)," \u2192 ",e.formatSize(e.image.reducedSize)," "),r(2),s("",e.getSavingsPercentage(e.image),"% saved")}}function L(o,t){if(o&1&&(_(0),i(1,"span"),a(2),n(),v()),o&2){let e=c(2);r(2),s("Size: ",e.formatSize(e.image.originalSize))}}function B(o,t){if(o&1){let e=y();i(0,"div",18)(1,"h3"),a(2,"Direct Object URL:"),n(),i(3,"div",19),b(4,"input",20),i(5,"div",21)(6,"button",22),x("click",function(){g(e);let l=c(2);return u(l.copyObjectUrl())}),a(7,"Copy"),n(),i(8,"button",23),x("click",function(){g(e);let l=c(2);return u(l.openInNewTab())}),a(9,"Open"),n()()(),i(10,"p",24),a(11,"This URL is temporary and will only work in the current browser session."),n()()}if(o&2){let e=c(2);r(4),d("value",e.objectUrl)}}function V(o,t){if(o&1){let e=y();i(0,"div",2)(1,"div",3)(2,"h2"),a(3),n(),i(4,"div",4)(5,"span"),a(6),n(),i(7,"span"),a(8),O(9,"date"),n(),i(10,"div",5)(11,"span"),a(12),n(),f(13,R,7,3,"ng-container",6)(14,L,3,1,"ng-container",6),n()(),i(15,"button",7),x("click",function(){g(e);let l=c();return u(l.downloadImage())}),a(16,"Download"),n()(),i(17,"div",8),b(18,"img",9),n(),f(19,B,12,1,"div",10),i(20,"div",11)(21,"h3"),a(22,"Base64 Data:"),n(),i(23,"div",12)(24,"textarea",13),a(25),n(),i(26,"button",14),x("click",function(){g(e);let l=c();return u(l.copyBase64())}),a(27,"Copy Base64"),n()()()()}if(o&2){let e=c();r(3),h(e.image.name),r(3),s("Type: ",e.image.type),r(2),s("Uploaded: ",E(9,10,e.image.date,"medium")),r(4),s("Quality: ",e.getQualityLabel(e.image.quality)),r(),d("ngIf",e.image.quality!=="original"),r(),d("ngIf",e.image.quality==="original"),r(4),d("src",e.image.base64,I)("alt",e.image.name),r(),d("ngIf",e.objectUrl),r(6),h(e.image.base64)}}function Q(o,t){o&1&&(i(0,"div",25)(1,"h2"),a(2,"Image not found"),n(),i(3,"p"),a(4,"The requested image could not be found."),n(),i(5,"a",26),a(6,"Return to gallery"),n()())}var T=class o{image;objectUrl;route=m(D);imageService=m(P);toastService=m(M);imageQualityService=m(j);ngOnInit(){this.route.paramMap.subscribe(t=>{let e=t.get("id");e&&(this.image=this.imageService.getImageById(e),this.image&&this.createObjectUrl())})}createObjectUrl(){if(!this.image)return;fetch(this.image.base64).then(e=>e.blob()).then(e=>{this.objectUrl=URL.createObjectURL(e)})}openInNewTab(){this.objectUrl&&window.open(this.objectUrl,"_blank")}copyObjectUrl(){this.objectUrl&&navigator.clipboard.writeText(this.objectUrl).then(()=>this.toastService.success("URL copied to clipboard!")).catch(t=>{console.error("Could not copy URL: ",t),this.toastService.error("Failed to copy URL")})}copyBase64(){this.image?.base64&&navigator.clipboard.writeText(this.image.base64).then(()=>{this.toastService.success("Base64 data copied to clipboard!")}).catch(t=>{console.error("Could not copy Base64 data: ",t),this.toastService.error("Failed to copy Base64 data")})}downloadImage(){if(!this.image)return;let t=document.createElement("a");t.href=this.image.base64,t.download=this.image.name,document.body.appendChild(t),t.click(),document.body.removeChild(t),this.toastService.info("Download started")}getQualityLabel(t){switch(t){case"optimized":return"Optimized";case"medium":return"Medium";case"low":return"Low";default:return"Original"}}formatSize(t){return this.imageQualityService.formatFileSize(t)}getSavingsPercentage(t){return t.quality==="original"||!t.compressionRatio?"0":((1-t.compressionRatio)*100).toFixed(0)}ngOnDestroy(){this.objectUrl&&URL.revokeObjectURL(this.objectUrl)}static \u0275fac=function(e){return new(e||o)};static \u0275cmp=S({type:o,selectors:[["app-image-detail"]],decls:3,vars:2,consts:[["notFound",""],["class","detail-container",4,"ngIf","ngIfElse"],[1,"detail-container"],[1,"detail-header"],[1,"detail-info"],[1,"size-info"],[4,"ngIf"],[1,"download-btn",3,"click"],[1,"image-container"],[3,"src","alt"],["class","object-url-container",4,"ngIf"],[1,"base64-container"],[1,"base64-display"],["readonly",""],["title","Copy Base64 data",1,"copy-btn",3,"click"],[1,"size-reduction"],[1,"label"],[1,"savings-badge"],[1,"object-url-container"],[1,"url-display"],["type","text","readonly","",1,"url-input",3,"value"],[1,"url-actions"],["title","Copy URL",1,"url-btn",3,"click"],["title","Open in new tab",1,"url-btn",3,"click"],[1,"url-note"],[1,"not-found"],["routerLink","/"]],template:function(e,p){if(e&1&&f(0,V,28,13,"div",1)(1,Q,7,0,"ng-template",null,0,U),e&2){let l=C(2);d("ngIf",p.image)("ngIfElse",l)}},dependencies:[k,z],styles:[".object-url-container[_ngcontent-%COMP%]{margin:20px 0;padding:15px;background-color:#f8f9fa;border-radius:6px;border:1px solid #e9ecef}.url-display[_ngcontent-%COMP%]{display:flex;margin-top:10px}.url-input[_ngcontent-%COMP%]{flex:1;padding:8px 12px;font-family:monospace;font-size:14px;border:1px solid #ced4da;border-radius:4px 0 0 4px;overflow:hidden;text-overflow:ellipsis}.url-actions[_ngcontent-%COMP%]{display:flex}.url-btn[_ngcontent-%COMP%]{padding:8px 16px;background-color:#06c;color:#fff;border:none;cursor:pointer;font-size:14px}.url-btn[_ngcontent-%COMP%]:first-child{border-radius:0;border-right:1px solid rgba(255,255,255,.3)}.url-btn[_ngcontent-%COMP%]:last-child{border-radius:0 4px 4px 0}.url-btn[_ngcontent-%COMP%]:hover{background-color:#0056b3}.url-note[_ngcontent-%COMP%]{margin-top:8px;font-size:12px;color:#6c757d;font-style:italic}.base64-display[_ngcontent-%COMP%]{position:relative;margin-top:10px}.base64-display[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:100%;height:100px;font-family:monospace;padding:10px;border:1px solid #ced4da;border-radius:4px;resize:vertical}.copy-btn[_ngcontent-%COMP%]{position:absolute;top:10px;right:10px;padding:6px 12px;background-color:#06c;color:#fff;border:none;border-radius:4px;cursor:pointer;font-size:14px;opacity:.8}.copy-btn[_ngcontent-%COMP%]:hover{opacity:1;background-color:#0056b3}.size-info[_ngcontent-%COMP%]{margin-top:10px;display:flex;flex-direction:column;gap:5px}.size-reduction[_ngcontent-%COMP%]{display:flex;align-items:center;flex-wrap:wrap;gap:8px}.label[_ngcontent-%COMP%]{font-weight:500}.savings-badge[_ngcontent-%COMP%]{background-color:#4caf50;color:#fff;padding:2px 8px;border-radius:12px;font-size:12px;font-weight:500}"]})};export{T as ImageDetail};
