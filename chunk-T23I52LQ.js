import{a as D}from"./chunk-ZRMNOIIR.js";import{a as _}from"./chunk-FGQZV2WB.js";import{Aa as a,Ba as n,Ca as I,Da as C,Ea as f,Fa as u,Ha as r,Ia as v,Ka as U,La as M,O as p,T as S,U as b,Xa as N,Ya as y,Za as T,c as E,cb as F,ia as w,ja as l,pa as c,ra as g,za as m}from"./chunk-RIYN7M7Q.js";function V(t,i){t&1&&(a(0,"div",7),r(1,"Uploading..."),n())}function $(t,i){if(t&1&&(a(0,"div",8),r(1),n()),t&2){let e=u();l(),v(e.errorMessage)}}var h=class t{isUploading=!1;errorMessage="";imageService=p(_);onFileSelected(i){let e=i.target;if(!e.files?.length)return;let o=e.files[0];if(!o.type.startsWith("image/")){this.errorMessage="Please select an image file";return}this.errorMessage="",this.isUploading=!0,this.imageService.uploadImage(o).then(()=>{this.isUploading=!1,e.value=""}).catch(s=>{console.error("Upload error:",s),this.errorMessage="Failed to upload image",this.isUploading=!1})}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=c({type:t,selectors:[["app-image-upload"]],decls:12,vars:3,consts:[[1,"upload-container"],[1,"upload-area"],["for","file-input",1,"upload-label"],[1,"upload-icon"],["type","file","id","file-input","accept","image/*",3,"change","disabled"],["class","upload-status",4,"ngIf"],["class","error-message",4,"ngIf"],[1,"upload-status"],[1,"error-message"]],template:function(e,o){e&1&&(a(0,"div",0)(1,"h2"),r(2,"Upload Image"),n(),a(3,"div",1)(4,"label",2)(5,"span",3),r(6,"+"),n(),a(7,"span"),r(8,"Select image to upload"),n()(),a(9,"input",4),f("change",function(d){return o.onFileSelected(d)}),n()(),g(10,V,2,0,"div",5)(11,$,2,1,"div",6),n()),e&2&&(l(9),m("disabled",o.isUploading),l(),m("ngIf",o.isUploading),l(),m("ngIf",o.errorMessage))},dependencies:[y],encapsulation:2})};function H(t,i){t&1&&(a(0,"div",4),r(1,"No images uploaded yet"),n())}function W(t,i){if(t&1){let e=C();a(0,"div",5),f("click",function(){let s=S(e).$implicit,d=u();return b(d.openInNewWindow(s))}),a(1,"div",6),I(2,"img",7),n(),a(3,"div",8)(4,"div",9),r(5),n(),a(6,"div",10),r(7),U(8,"date"),n(),a(9,"button",11),f("click",function(s){let d=S(e).$implicit,O=u();return b(O.deleteImage(d.id,s))}),r(10,"Delete"),n()()()}if(t&2){let e=i.$implicit;l(2),m("src",e.base64,w)("alt",e.name),l(3),v(e.name),l(2),v(M(8,4,e.date,"short"))}}var x=class t{images=[];imageService=p(_);confirmationService=p(D);toastService=p(F);ngOnInit(){this.imageService.images$.subscribe(i=>{this.images=i})}openInNewWindow(i){let e=`/detail/${i.id}`;window.open(e,"_blank")}deleteImage(i,e){return E(this,null,function*(){e.stopPropagation(),(yield this.confirmationService.confirm("Are you sure you want to delete this image?"))&&(this.imageService.deleteImage(i),this.toastService.success("Image deleted successfully"))})}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=c({type:t,selectors:[["app-image-gallery"]],decls:6,vars:2,consts:[[1,"gallery-container"],["class","empty-gallery",4,"ngIf"],[1,"image-grid"],["class","image-card",3,"click",4,"ngFor","ngForOf"],[1,"empty-gallery"],[1,"image-card",3,"click"],[1,"image-preview"],[3,"src","alt"],[1,"image-info"],[1,"image-name"],[1,"image-date"],[1,"delete-btn",3,"click"]],template:function(e,o){e&1&&(a(0,"div",0)(1,"h2"),r(2,"Image Gallery"),n(),g(3,H,2,0,"div",1),a(4,"div",2),g(5,W,11,7,"div",3),n()()),e&2&&(l(3),m("ngIf",o.images.length===0),l(2),m("ngForOf",o.images))},dependencies:[y,N,T],encapsulation:2})};var k=class t{static \u0275fac=function(e){return new(e||t)};static \u0275cmp=c({type:t,selectors:[["app-home"]],decls:4,vars:0,consts:[[1,"dashboard-container"],[1,"dashboard-content"]],template:function(e,o){e&1&&(a(0,"div",0)(1,"div",1),I(2,"app-image-upload")(3,"app-image-gallery"),n()())},dependencies:[h,x],styles:[".dashboard-container[_ngcontent-%COMP%]{margin-bottom:20px}.dashboard-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:20px}@media (min-width: 768px){.dashboard-content[_ngcontent-%COMP%]{gap:30px}}"]})};export{k as Home};
