import{b as j,c as T}from"./chunk-V24BUC7G.js";import{$ as D,A as _,B as v,C as y,D as b,E as u,F as c,G as S,I as o,J as h,K as x,L as O,M as w,O as M,P,U as k,V as E,X as U,Z as z,j as p,k as m,l as g,p as C,q as r,r as I,u as f,x as d,y as i,z as n}from"./chunk-JFZKIFJG.js";function L(a,t){if(a&1&&(v(0),i(1,"span",15)(2,"span",16),o(3,"Size reduced:"),n(),o(4),i(5,"span",17),o(6),n()(),y()),a&2){let e=c(2);r(4),O(" ",e.formatSize(e.image.originalSize)," \u2192 ",e.formatSize(e.image.reducedSize)," "),r(2),x("",e.getSavingsPercentage(e.image),"% saved")}}function V(a,t){if(a&1&&(v(0),i(1,"span"),o(2),n(),y()),a&2){let e=c(2);r(2),x("Size: ",e.formatSize(e.image.originalSize))}}function F(a,t){if(a&1){let e=b();i(0,"div",18)(1,"h3"),o(2,"Direct Object URL:"),n(),i(3,"div",19),_(4,"input",20),i(5,"div",21)(6,"button",22),u("click",function(){m(e);let l=c(2);return g(l.copyObjectUrl())}),o(7,"Copy"),n(),i(8,"button",23),u("click",function(){m(e);let l=c(2);return g(l.openInNewTab())}),o(9,"Open"),n()()(),i(10,"p",24),o(11,"This URL is temporary and will only work in the current browser session."),n()()}if(a&2){let e=c(2);r(4),d("value",e.objectUrl)}}function B(a,t){if(a&1){let e=b();i(0,"div",2)(1,"div",3)(2,"h2"),o(3),n(),i(4,"div",4)(5,"span"),o(6),n(),i(7,"span"),o(8),w(9,"date"),n(),i(10,"div",5)(11,"span"),o(12),n(),f(13,L,7,3,"ng-container",6)(14,V,3,1,"ng-container",6),n()(),i(15,"button",7),u("click",function(){m(e);let l=c();return g(l.downloadImage())}),o(16,"Download"),n()(),i(17,"div",8),_(18,"img",9),n(),f(19,F,12,1,"div",10),i(20,"div",11)(21,"h3"),o(22,"Base64 Data:"),n(),i(23,"div",12)(24,"textarea",13),o(25),n(),i(26,"button",14),u("click",function(){m(e);let l=c();return g(l.copyBase64())}),o(27,"Copy Base64"),n()()()()}if(a&2){let e=c();r(3),h(e.image.name),r(3),x("Type: ",e.image.type),r(2),x("Uploaded: ",M(9,10,e.image.date,"medium")),r(4),x("Quality: ",e.getQualityLabel(e.image.quality)),r(),d("ngIf",e.image.quality!=="original"),r(),d("ngIf",e.image.quality==="original"),r(4),d("src",e.image.base64,C)("alt",e.image.name),r(),d("ngIf",e.objectUrl),r(6),h(e.image.base64)}}function N(a,t){if(a&1){let e=b();i(0,"div",25)(1,"div",26),o(2,"\u274C"),n(),i(3,"h2"),o(4,"Image Not Found"),n(),i(5,"p"),o(6,"The requested image could not be found or may have been deleted."),n(),i(7,"button",27),u("click",function(){m(e);let l=c();return g(l.returnToGallery())}),i(8,"span",28),o(9,"\u2190"),n(),o(10," Return to Gallery"),n()()}}var R=class a{image;objectUrl;imageNotFound=!1;route=p(U);router=p(z);imageService=p(j);toastService=p(D);imageQualityService=p(T);ngOnInit(){this.route.paramMap.subscribe(t=>{let e=t.get("id");e?(this.image=this.imageService.getImageById(e),this.image?(this.createObjectUrl(),this.imageNotFound=!1):this.imageNotFound=!0):this.imageNotFound=!0})}createObjectUrl(){if(!this.image)return;fetch(this.image.base64).then(e=>e.blob()).then(e=>{this.objectUrl=URL.createObjectURL(e)})}openInNewTab(){this.objectUrl&&window.open(this.objectUrl,"_blank")}copyObjectUrl(){this.objectUrl&&navigator.clipboard.writeText(this.objectUrl).then(()=>this.toastService.success("URL copied to clipboard!")).catch(t=>{console.error("Could not copy URL: ",t),this.toastService.error("Failed to copy URL")})}copyBase64(){this.image?.base64&&navigator.clipboard.writeText(this.image.base64).then(()=>{this.toastService.success("Base64 data copied to clipboard!")}).catch(t=>{console.error("Could not copy Base64 data: ",t),this.toastService.error("Failed to copy Base64 data")})}downloadImage(){if(!this.image)return;let t=document.createElement("a");t.href=this.image.base64,t.download=this.image.name,document.body.appendChild(t),t.click(),document.body.removeChild(t),this.toastService.info("Download started")}getQualityLabel(t){switch(t){case"optimized":return"Optimized";case"medium":return"Medium";case"low":return"Low";default:return"Original"}}formatSize(t){return this.imageQualityService.formatFileSize(t)}getSavingsPercentage(t){return t.quality==="original"||!t.compressionRatio?"0":((1-t.compressionRatio)*100).toFixed(0)}returnToGallery(){this.router.navigate(["/"])}ngOnDestroy(){this.objectUrl&&URL.revokeObjectURL(this.objectUrl)}static \u0275fac=function(e){return new(e||a)};static \u0275cmp=I({type:a,selectors:[["app-image-detail"]],decls:3,vars:2,consts:[["notFound",""],["class","detail-container",4,"ngIf","ngIfElse"],[1,"detail-container"],[1,"detail-header"],[1,"detail-info"],[1,"size-info"],[4,"ngIf"],[1,"download-btn",3,"click"],[1,"image-container"],[3,"src","alt"],["class","object-url-container",4,"ngIf"],[1,"base64-container"],[1,"base64-display"],["readonly",""],["title","Copy Base64 data",1,"copy-btn",3,"click"],[1,"size-reduction"],[1,"label"],[1,"savings-badge"],[1,"object-url-container"],[1,"url-display"],["type","text","readonly","",1,"url-input",3,"value"],[1,"url-actions"],["title","Copy URL",1,"url-btn",3,"click"],["title","Open in new tab",1,"url-btn",3,"click"],[1,"url-note"],[1,"not-found-container"],[1,"not-found-icon"],[1,"return-btn",3,"click"],[1,"return-icon"]],template:function(e,s){if(e&1&&f(0,B,28,13,"div",1)(1,N,11,0,"ng-template",null,0,P),e&2){let l=S(2);d("ngIf",s.image)("ngIfElse",l)}},dependencies:[k,E],styles:[".object-url-container[_ngcontent-%COMP%]{margin:20px 0;padding:15px;background-color:#f8f9fa;border-radius:6px;border:1px solid #e9ecef}.url-display[_ngcontent-%COMP%]{display:flex;margin-top:10px}.url-input[_ngcontent-%COMP%]{flex:1;padding:8px 12px;font-family:monospace;font-size:14px;border:1px solid #ced4da;border-radius:4px 0 0 4px;overflow:hidden;text-overflow:ellipsis}.url-actions[_ngcontent-%COMP%]{display:flex}.url-btn[_ngcontent-%COMP%]{padding:8px 16px;background-color:#06c;color:#fff;border:none;cursor:pointer;font-size:14px}.url-btn[_ngcontent-%COMP%]:first-child{border-radius:0;border-right:1px solid rgba(255,255,255,.3)}.url-btn[_ngcontent-%COMP%]:last-child{border-radius:0 4px 4px 0}.url-btn[_ngcontent-%COMP%]:hover{background-color:#0056b3}.url-note[_ngcontent-%COMP%]{margin-top:8px;font-size:12px;color:#6c757d;font-style:italic}.base64-display[_ngcontent-%COMP%]{position:relative;margin-top:10px}.base64-display[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:100%;height:100px;font-family:monospace;padding:10px;border:1px solid #ced4da;border-radius:4px;resize:vertical}.copy-btn[_ngcontent-%COMP%]{position:absolute;top:10px;right:10px;padding:6px 12px;background-color:#06c;color:#fff;border:none;border-radius:4px;cursor:pointer;font-size:14px;opacity:.8}.copy-btn[_ngcontent-%COMP%]:hover{opacity:1;background-color:#0056b3}.size-info[_ngcontent-%COMP%]{margin-top:10px;display:flex;flex-direction:column;gap:5px}.size-reduction[_ngcontent-%COMP%]{display:flex;align-items:center;flex-wrap:wrap;gap:8px}.label[_ngcontent-%COMP%]{font-weight:500}.savings-badge[_ngcontent-%COMP%]{background-color:#4caf50;color:#fff;padding:2px 8px;border-radius:12px;font-size:12px;font-weight:500}.not-found-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:40px 20px;text-align:center;background-color:#f9f9f9;border-radius:8px;margin:20px auto;max-width:500px;box-shadow:0 2px 10px #0000000d}.not-found-icon[_ngcontent-%COMP%]{font-size:48px;margin-bottom:20px}.not-found-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#d32f2f;margin-bottom:10px}.not-found-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#666;margin-bottom:25px}.return-btn[_ngcontent-%COMP%]{display:flex;align-items:center;padding:10px 20px;background-color:#06c;color:#fff;border:none;border-radius:4px;font-weight:500;cursor:pointer;transition:all .2s ease;box-shadow:0 2px 4px #0000001a}.return-icon[_ngcontent-%COMP%]{margin-right:8px;font-size:18px}.return-btn[_ngcontent-%COMP%]:hover{background-color:#0055b3}.return-btn[_ngcontent-%COMP%]:active{transform:translateY(1px)}"]})};export{R as ImageDetail};
