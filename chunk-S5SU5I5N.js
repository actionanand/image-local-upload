import{b as k}from"./chunk-R2WSOXDL.js";import{a as j}from"./chunk-FGQZV2WB.js";import{Aa as i,Ba as n,Ca as x,Da as f,Ea as g,Fa as c,Ga as I,Ha as o,Ia as _,Ja as v,Ka as C,La as w,Ma as O,O as b,T as d,U as p,Ya as S,Za as U,cb as D,ia as h,ja as l,pa as y,ra as u,za as m}from"./chunk-RIYN7M7Q.js";function M(a,t){if(a&1){let e=f();i(0,"div",13)(1,"h3"),o(2,"Direct Object URL:"),n(),i(3,"div",14),x(4,"input",15),i(5,"div",16)(6,"button",17),g("click",function(){d(e);let r=c(2);return p(r.copyObjectUrl())}),o(7,"Copy"),n(),i(8,"button",18),g("click",function(){d(e);let r=c(2);return p(r.openInNewTab())}),o(9,"Open"),n()()(),i(10,"p",19),o(11,"This URL is temporary and will only work in the current browser session."),n()()}if(a&2){let e=c(2);l(4),m("value",e.objectUrl)}}function P(a,t){if(a&1){let e=f();i(0,"div",2)(1,"div",3)(2,"h2"),o(3),n(),i(4,"div",4)(5,"span"),o(6),n(),i(7,"span"),o(8),C(9,"date"),n()(),i(10,"button",5),g("click",function(){d(e);let r=c();return p(r.downloadImage())}),o(11,"Download"),n()(),i(12,"div",6),x(13,"img",7),n(),u(14,M,12,1,"div",8),i(15,"div",9)(16,"h3"),o(17,"Base64 Data:"),n(),i(18,"div",10)(19,"textarea",11),o(20),n(),i(21,"button",12),g("click",function(){d(e);let r=c();return p(r.copyBase64())}),o(22,"Copy Base64"),n()()()()}if(a&2){let e=c();l(3),_(e.image.name),l(3),v("Type: ",e.image.type),l(2),v("Uploaded: ",w(9,7,e.image.date,"medium")),l(5),m("src",e.image.base64,h)("alt",e.image.name),l(),m("ngIf",e.objectUrl),l(6),_(e.image.base64)}}function T(a,t){a&1&&(i(0,"div",20)(1,"h2"),o(2,"Image not found"),n(),i(3,"p"),o(4,"The requested image could not be found."),n(),i(5,"a",21),o(6,"Return to gallery"),n()())}var E=class a{image;objectUrl;route=b(k);imageService=b(j);toastService=b(D);ngOnInit(){this.route.paramMap.subscribe(t=>{let e=t.get("id");e&&(this.image=this.imageService.getImageById(e),this.image&&this.createObjectUrl())})}createObjectUrl(){if(!this.image)return;fetch(this.image.base64).then(e=>e.blob()).then(e=>{this.objectUrl=URL.createObjectURL(e)})}openInNewTab(){this.objectUrl&&window.open(this.objectUrl,"_blank")}copyObjectUrl(){this.objectUrl&&navigator.clipboard.writeText(this.objectUrl).then(()=>this.toastService.success("URL copied to clipboard!")).catch(t=>{console.error("Could not copy URL: ",t),this.toastService.error("Failed to copy URL")})}copyBase64(){this.image?.base64&&navigator.clipboard.writeText(this.image.base64).then(()=>{this.toastService.success("Base64 data copied to clipboard!")}).catch(t=>{console.error("Could not copy Base64 data: ",t),this.toastService.error("Failed to copy Base64 data")})}downloadImage(){if(!this.image)return;let t=document.createElement("a");t.href=this.image.base64,t.download=this.image.name,document.body.appendChild(t),t.click(),document.body.removeChild(t),this.toastService.info("Download started")}ngOnDestroy(){this.objectUrl&&URL.revokeObjectURL(this.objectUrl)}static \u0275fac=function(e){return new(e||a)};static \u0275cmp=y({type:a,selectors:[["app-image-detail"]],decls:3,vars:2,consts:[["notFound",""],["class","detail-container",4,"ngIf","ngIfElse"],[1,"detail-container"],[1,"detail-header"],[1,"detail-info"],[1,"download-btn",3,"click"],[1,"image-container"],[3,"src","alt"],["class","object-url-container",4,"ngIf"],[1,"base64-container"],[1,"base64-display"],["readonly",""],["title","Copy Base64 data",1,"copy-btn",3,"click"],[1,"object-url-container"],[1,"url-display"],["type","text","readonly","",1,"url-input",3,"value"],[1,"url-actions"],["title","Copy URL",1,"url-btn",3,"click"],["title","Open in new tab",1,"url-btn",3,"click"],[1,"url-note"],[1,"not-found"],["routerLink","/"]],template:function(e,s){if(e&1&&u(0,P,23,10,"div",1)(1,T,7,0,"ng-template",null,0,O),e&2){let r=I(2);m("ngIf",s.image)("ngIfElse",r)}},dependencies:[S,U],styles:[".object-url-container[_ngcontent-%COMP%]{margin:20px 0;padding:15px;background-color:#f8f9fa;border-radius:6px;border:1px solid #e9ecef}.url-display[_ngcontent-%COMP%]{display:flex;margin-top:10px}.url-input[_ngcontent-%COMP%]{flex:1;padding:8px 12px;font-family:monospace;font-size:14px;border:1px solid #ced4da;border-radius:4px 0 0 4px;overflow:hidden;text-overflow:ellipsis}.url-actions[_ngcontent-%COMP%]{display:flex}.url-btn[_ngcontent-%COMP%]{padding:8px 16px;background-color:#06c;color:#fff;border:none;cursor:pointer;font-size:14px}.url-btn[_ngcontent-%COMP%]:first-child{border-radius:0;border-right:1px solid rgba(255,255,255,.3)}.url-btn[_ngcontent-%COMP%]:last-child{border-radius:0 4px 4px 0}.url-btn[_ngcontent-%COMP%]:hover{background-color:#0056b3}.url-note[_ngcontent-%COMP%]{margin-top:8px;font-size:12px;color:#6c757d;font-style:italic}.base64-display[_ngcontent-%COMP%]{position:relative;margin-top:10px}.base64-display[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:100%;height:100px;font-family:monospace;padding:10px;border:1px solid #ced4da;border-radius:4px;resize:vertical}.copy-btn[_ngcontent-%COMP%]{position:absolute;top:10px;right:10px;padding:6px 12px;background-color:#06c;color:#fff;border:none;border-radius:4px;cursor:pointer;font-size:14px;opacity:.8}.copy-btn[_ngcontent-%COMP%]:hover{opacity:1;background-color:#0056b3}"]})};export{E as ImageDetail};
